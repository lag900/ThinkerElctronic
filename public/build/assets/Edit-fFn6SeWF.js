import{g as z,c as g,a as m,u as s,h as D,w as x,b as e,t as a,i as b,v,o as p,F as y,r as k,j as h,n as _,q as M,e as L,f as S,p as A,s as w}from"./app-XjmjDCX4.js";import{_ as H}from"./AdminLayout-CDH7ShNR.js";import{c as r}from"./CartStore-CycqUX3G.js";const F={class:"flex items-center gap-4"},N=["dir"],T={class:"bg-white p-10 rounded-[32px] border border-gray-100 shadow-sm"},U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},q={class:"space-y-2"},E={class:"text-xs font-bold uppercase tracking-widest text-gray-400 px-1"},I=["disabled"],O={class:"space-y-2"},P={class:"text-xs font-bold uppercase tracking-widest text-gray-400 px-1"},$=["disabled"],G={class:"space-y-2"},K={class:"text-xs font-bold uppercase tracking-widest text-gray-400 px-1"},J=["disabled"],Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},W={class:"px-8 py-6 bg-gray-50/50 border-b border-gray-50 flex items-center justify-between"},X={class:"flex items-center gap-4"},Y=["innerHTML"],Z={class:"font-bold text-gray-900"},ee=["onClick"],se={class:"p-8 grid grid-cols-1 sm:grid-cols-2 gap-3"},oe=["onClick"],te={class:"flex flex-col"},re={class:"text-[9px] font-medium text-gray-400 uppercase tracking-tighter"},le={key:0,class:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"4"},ne={class:"fixed bottom-0 inset-x-0 bg-white/80 backdrop-blur-xl border-t border-gray-100 p-6 z-50"},ie={class:"max-w-7xl mx-auto flex justify-between items-center"},ae={class:"flex gap-4"},de=["disabled"],fe={__name:"Edit",props:{role:Object,permissions:Object},setup(f){const l=f,d=S(()=>l.role&&l.role.name==="super_admin"),o=z({name:l.role?l.role.name:"",label:l.role?l.role.label:"",description:l.role?l.role.description:"",permissions:l.role?l.role.permissions.map(u=>u.id):[]}),C=u=>{if(d.value)return;const t=o.permissions.indexOf(u);t>-1?o.permissions.splice(t,1):o.permissions.push(u)},j=u=>{if(d.value)return;const t=u.map(n=>n.id);t.every(n=>o.permissions.includes(n))?o.permissions=o.permissions.filter(n=>!t.includes(n)):t.forEach(n=>{o.permissions.includes(n)||o.permissions.push(n)})},B=()=>{l.role?o.put(route("admin.roles.update",l.role.id),{onSuccess:()=>w.notify(r.language==="ar"?"تم تحديث الدور بنجاح":"Role updated successfully")}):o.post(route("admin.roles.store"),{onSuccess:()=>w.notify(r.language==="ar"?"تم إنشاء الدور بنجاح":"Role created successfully")})},R=()=>{d.value||confirm(r.language==="ar"?"هل أنت متأكد من حذف هذا الدور؟ هذا الإجراء قد يسبب خللاً في صلاحيات المستخدمين.":"Delete this role? This might affect users assigned to it.")&&A.delete(route("admin.roles.destroy",l.role.id),{onSuccess:()=>w.notify(r.language==="ar"?"تم حذف الدور":"Role deleted","error")})},V={"Users Management":'<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>',"Orders & Invoices":'<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>',"Products & Categories":'<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>',Customers:'<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>',Finance:'<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'};return(u,t)=>(p(),g(y,null,[m(s(D),{title:f.role?s(r).language==="ar"?"تعديل الدور":"Edit Role":s(r).language==="ar"?"إضافة دور":"Add Role"},null,8,["title"]),m(H,null,{header:x(()=>[e("div",F,[m(s(M),{href:u.route("admin.roles.index"),class:"p-2 hover:bg-gray-100 rounded-xl transition-all"},{default:x(()=>[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e("span",null,a(f.role?s(r).language==="ar"?"تعديل سياسة الصلاحيات":"Configure Permission Policy":s(r).language==="ar"?"تعريف دور أمني جديد":"New Security Clearance Role"),1)])]),default:x(()=>[e("div",{class:"space-y-8 font-inter pb-20",dir:s(r).language==="ar"?"rtl":"ltr"},[e("div",T,[e("div",U,[e("div",q,[e("label",E,a(s(r).language==="ar"?"مفتاح الدور (Unique Key)":"Role Identifier (Slug)"),1),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>s(o).name=c),type:"text",disabled:d.value,class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none transition-all",required:""},null,8,I),[[v,s(o).name]])]),e("div",O,[e("label",P,a(s(r).language==="ar"?"اسم الدور":"Role Label"),1),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>s(o).label=c),type:"text",disabled:d.value,class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none transition-all",required:""},null,8,$),[[v,s(o).label]])]),e("div",G,[e("label",K,a(s(r).language==="ar"?"الوصف":"Description"),1),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>s(o).description=c),type:"text",disabled:d.value,class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none transition-all"},null,8,J),[[v,s(o).description]])])])]),e("div",Q,[(p(!0),g(y,null,k(f.permissions,(c,n)=>(p(),g("div",{key:n,class:"bg-white rounded-[32px] border border-gray-100 shadow-sm overflow-hidden flex flex-col"},[e("div",W,[e("div",X,[e("div",{class:"w-10 h-10 rounded-xl bg-white border border-gray-100 shadow-sm flex items-center justify-center text-gray-900",innerHTML:V[n]||""},null,8,Y),e("h3",Z,a(n),1)]),d.value?h("",!0):(p(),g("button",{key:0,onClick:i=>j(c),class:"text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-lg border border-gray-200 hover:bg-white hover:border-[#ff0033] hover:text-[#ff0033] transition-all"},a(c.every(i=>s(o).permissions.includes(i.id))?s(r).language==="ar"?"إلغاء الكل":"Deselect All":s(r).language==="ar"?"تحديد الكل":"Select All"),9,ee))]),e("div",se,[(p(!0),g(y,null,k(c,i=>(p(),g("div",{key:i.id,onClick:ce=>C(i.id),class:_(["group relative flex items-center justify-between p-4 rounded-2xl border transition-all cursor-pointer",[s(o).permissions.includes(i.id)?"bg-red-50 border-[#ff0033]/20":"bg-gray-50 border-transparent hover:border-gray-200",d.value?"opacity-50 cursor-not-allowed":""]])},[e("div",te,[e("span",{class:_(["text-xs font-bold transition-colors",s(o).permissions.includes(i.id)?"text-[#ff0033]":"text-gray-700"])},a(i.label),3),e("span",re,a(i.name),1)]),e("div",{class:_(["w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center",s(o).permissions.includes(i.id)?"bg-[#ff0033] border-[#ff0033]":"bg-white border-gray-200 group-hover:border-gray-300"])},[s(o).permissions.includes(i.id)?(p(),g("svg",le,[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):h("",!0)],2)],10,oe))),128))])]))),128))]),e("div",ne,[e("div",ie,[e("div",null,[f.role&&!d.value?(p(),g("button",{key:0,onClick:R,class:"text-red-500 font-bold text-sm px-6 py-3 hover:bg-red-50 rounded-2xl transition-all"},a(s(r).language==="ar"?"حذف هذا الدور":"Delete Role Permanently"),1)):h("",!0)]),e("div",ae,[m(s(M),{href:u.route("admin.roles.index"),class:"px-10 py-4 text-sm font-bold text-gray-500 hover:text-gray-900 transition-all"},{default:x(()=>[L(a(s(r).language==="ar"?"إلغاء":"Discard"),1)]),_:1},8,["href"]),d.value?h("",!0):(p(),g("button",{key:0,onClick:B,disabled:s(o).processing,class:"bg-gradient-to-r from-[#ff0033] to-[#cc0029] text-white px-14 py-4 rounded-2xl font-bold text-sm shadow-xl shadow-red-500/20 hover:shadow-red-500/40 active:scale-95 transition-all disabled:opacity-50"},a(s(r).language==="ar"?"حفظ السياسة":"Deploy Protocol"),9,de))])])])],8,N)]),_:1})],64))}};export{fe as default};
