import{m as p,g as N,x as z,p as C,c as d,a as S,u as t,h as D,w as V,b as e,o as i,n as k,i as c,v as y,t as l,F as h,r as U,l as b,j,k as E,e as q,s as _}from"./app-Ci0ddvc-.js";import{_ as H}from"./AdminLayout-C6Ydksq4.js";import{c as a}from"./CartStore-L4PrAP_b.js";import{d as R}from"./debounce-w2a4_VVY.js";const O=["dir"],T={class:"flex flex-col md:flex-row justify-between items-center bg-white p-8 rounded-3xl border border-gray-100 shadow-sm gap-6"},G={class:"flex flex-col md:flex-row gap-4 items-center flex-1 w-full"},P={class:"relative flex-1 w-full"},I=["placeholder"],J={value:""},K=["value"],Q={value:""},W={value:"active"},X={value:"suspended"},Y={class:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden"},Z={class:"overflow-x-auto"},ee={class:"bg-gray-50/50 border-b border-gray-100 text-[11px] font-bold uppercase tracking-widest text-gray-400"},te={class:"px-8 py-6"},se={class:"px-8 py-6"},ae={class:"px-8 py-6"},oe={class:"px-8 py-6"},le={class:"px-8 py-6 text-center"},re={class:"divide-y divide-gray-50"},ne={class:"px-8 py-6"},de={class:"flex items-center gap-4"},ie={class:"w-12 h-12 rounded-full bg-brand-50 text-brand-500 flex items-center justify-center font-bold text-lg border border-brand-100 uppercase"},ue={class:"text-sm font-bold text-gray-900 leading-none mb-1"},ce={class:"text-xs text-gray-400"},ge={class:"px-8 py-6"},pe={class:"text-xs font-bold text-gray-600 bg-gray-100 px-3 py-1 rounded-full uppercase tracking-tighter"},fe={class:"px-8 py-6"},xe={class:"px-8 py-6"},me={class:"text-xs text-gray-400 font-medium"},ve={class:"px-8 py-6"},ye={class:"flex gap-2 justify-center"},he=["onClick"],be=["onClick"],_e=["dir"],we={class:"bg-white w-full max-w-lg rounded-[32px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300"},ke={class:"p-10"},Ue={class:"flex justify-between items-center mb-8"},Ce={class:"text-2xl font-bold text-gray-900"},Se={class:"space-y-2"},Ve={class:"text-xs font-bold uppercase tracking-widest text-gray-400"},je={class:"space-y-2"},Ae={class:"text-xs font-bold uppercase tracking-widest text-gray-400"},Me={class:"grid grid-cols-2 gap-4"},Fe={class:"space-y-2"},Be={class:"text-xs font-bold uppercase tracking-widest text-gray-400"},Le=["value"],$e={class:"space-y-2"},Ne={class:"text-xs font-bold uppercase tracking-widest text-gray-400"},ze={value:"active"},De={value:"suspended"},Ee={class:"space-y-2"},qe={class:"text-xs font-bold uppercase tracking-widest text-gray-400"},He=["required","placeholder"],Re={class:"flex gap-4 pt-6"},Oe=["disabled"],Je={__name:"Users",props:{users:Object,roles:Array,filters:Object},setup(f){const w=f,x=p(w.filters.search||""),m=p(w.filters.role_id||""),v=p(w.filters.status||""),g=p(!1),u=p(null),r=N({name:"",email:"",password:"",role_id:"",status:"active"}),A=()=>{u.value=null,r.reset(),r.status="active",g.value=!0},M=n=>{u.value=n,r.name=n.name,r.email=n.email,r.role_id=n.role_id,r.status=n.status,r.password="",g.value=!0},F=()=>{u.value?r.put(route("admin.users.update",u.value.id),{onSuccess:()=>{g.value=!1,_.notify(a.language==="ar"?"تم تحديث بيانات المستخدم":"User profile updated")}}):r.post(route("admin.users.store"),{onSuccess:()=>{g.value=!1,_.notify(a.language==="ar"?"تم إضافة المستخدم الجديد":"New user added successfully")}})},B=n=>{confirm(a.language==="ar"?`هل أنت متأكد من حذف (${n.name})؟`:`Delete user ${n.name}?`)&&C.delete(route("admin.users.destroy",n.id),{onSuccess:()=>_.notify(a.language==="ar"?"تم حذف المستخدم":"User deleted","error"),onError:o=>_.notify(o.error||"Unauthorized","error")})};z([x,m,v],R(()=>{C.get(route("admin.users.index"),{search:x.value,role_id:m.value,status:v.value},{preserveState:!0,replace:!0})},300));const L=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"---";return(n,o)=>(i(),d(h,null,[S(t(D),{title:t(a).language==="ar"?"إدارة المستخدمين":"User Management"},null,8,["title"]),S(H,null,{header:V(()=>[q(l(t(a).language==="ar"?"إدارة مستخدمي النظام":"Enterprise User Management"),1)]),default:V(()=>[e("div",{class:"space-y-8 font-inter",dir:t(a).language==="ar"?"rtl":"ltr"},[e("div",T,[e("div",G,[e("div",P,[(i(),d("svg",{class:k(["absolute w-5 h-5 text-gray-400 top-1/2 -translate-y-1/2",t(a).language==="ar"?"right-5":"left-5"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...o[10]||(o[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])],2)),c(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>x.value=s),type:"text",placeholder:t(a).language==="ar"?"بحث بالاسم، البريد...":"Search name, email...",class:"w-full bg-gray-50 border-gray-100 rounded-2xl py-4 px-14 text-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"},null,8,I),[[y,x.value]])]),c(e("select",{"onUpdate:modelValue":o[1]||(o[1]=s=>m.value=s),class:"w-full md:w-48 bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-brand-500 outline-none"},[e("option",J,l(t(a).language==="ar"?"كل الأدوار":"All Roles"),1),(i(!0),d(h,null,U(f.roles,s=>(i(),d("option",{key:s.id,value:s.id},l(s.label),9,K))),128))],512),[[b,m.value]]),c(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>v.value=s),class:"w-full md:w-40 bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-brand-500 outline-none"},[e("option",Q,l(t(a).language==="ar"?"كل الحالات":"All Status"),1),e("option",W,l(t(a).language==="ar"?"نشط":"Active"),1),e("option",X,l(t(a).language==="ar"?"معطل":"Suspended"),1)],512),[[b,v.value]])]),e("button",{onClick:A,class:"w-full md:w-auto bg-gradient-to-r from-[#ff0033] to-[#cc0029] text-white px-10 py-4 rounded-2xl font-bold text-sm hover:shadow-lg hover:shadow-red-500/30 transition-all active:scale-95"}," + "+l(t(a).language==="ar"?"إضافة مستخدم":"Add User"),1)]),e("div",Y,[e("div",Z,[e("table",{class:k(["w-full",t(a).language==="ar"?"text-right":"text-left"])},[e("thead",null,[e("tr",ee,[e("th",te,l(t(a).language==="ar"?"المستخدم":"User"),1),e("th",se,l(t(a).language==="ar"?"الدور":"Role"),1),e("th",ae,l(t(a).language==="ar"?"الحالة":"Status"),1),e("th",oe,l(t(a).language==="ar"?"آخر ظهور":"Last Login"),1),e("th",le,l(t(a).language==="ar"?"الإجراءات":"Actions"),1)])]),e("tbody",re,[(i(!0),d(h,null,U(f.users.data,s=>(i(),d("tr",{key:s.id,class:"hover:bg-gray-50/50 transition-all group"},[e("td",ne,[e("div",de,[e("div",ie,l(s.name.charAt(0)),1),e("div",null,[e("h4",ue,l(s.name),1),e("p",ce,l(s.email),1)])])]),e("td",ge,[e("span",pe,l(s.role_node?.label||s.role||"User"),1)]),e("td",fe,[e("span",{class:k(["px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest",s.status==="active"?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-600"])},l(s.status==="active"?t(a).language==="ar"?"نشط":"Active":t(a).language==="ar"?"معطل":"Suspended"),3)]),e("td",xe,[e("span",me,l(L(s.last_login_at)),1)]),e("td",ve,[e("div",ye,[e("button",{onClick:$=>M(s),class:"p-2.5 text-gray-400 hover:text-[#ff0033] hover:bg-red-50 rounded-xl transition-all"},[...o[11]||(o[11]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,he),s.id!==n.$page.props.auth.user.id?(i(),d("button",{key:0,onClick:$=>B(s),class:"p-2.5 text-gray-300 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all"},[...o[12]||(o[12]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,be)):j("",!0)])])]))),128))])],2)])])],8,O),g.value?(i(),d("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-sm",dir:t(a).language==="ar"?"rtl":"ltr"},[e("div",we,[e("div",ke,[e("div",Ue,[e("h3",Ce,l(u.value?t(a).language==="ar"?"تعديل مستخدم":"Edit User":t(a).language==="ar"?"إضافة مستخدم":"Add New User"),1),e("button",{onClick:o[3]||(o[3]=s=>g.value=!1),class:"text-gray-400 hover:text-gray-900 transition-all"},[...o[13]||(o[13]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:E(F,["prevent"]),class:"space-y-6"},[e("div",Se,[e("label",Ve,l(t(a).language==="ar"?"الاسم":"Name"),1),c(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>t(r).name=s),type:"text",class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none transition-all",required:""},null,512),[[y,t(r).name]])]),e("div",je,[e("label",Ae,l(t(a).language==="ar"?"البريد الإلكتروني":"Email Address"),1),c(e("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>t(r).email=s),type:"email",class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none transition-all",required:""},null,512),[[y,t(r).email]])]),e("div",Me,[e("div",Fe,[e("label",Be,l(t(a).language==="ar"?"الدور":"Role"),1),c(e("select",{"onUpdate:modelValue":o[6]||(o[6]=s=>t(r).role_id=s),class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none appearance-none cursor-pointer",required:""},[(i(!0),d(h,null,U(f.roles,s=>(i(),d("option",{key:s.id,value:s.id},l(s.label),9,Le))),128))],512),[[b,t(r).role_id]])]),e("div",$e,[e("label",Ne,l(t(a).language==="ar"?"الحالة":"Status"),1),c(e("select",{"onUpdate:modelValue":o[7]||(o[7]=s=>t(r).status=s),class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none appearance-none cursor-pointer"},[e("option",ze,l(t(a).language==="ar"?"نشط":"Active"),1),e("option",De,l(t(a).language==="ar"?"معطل":"Suspended"),1)],512),[[b,t(r).status]])])]),e("div",Ee,[e("label",qe,l(t(a).language==="ar"?"كلمة المرور":"Password"),1),c(e("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>t(r).password=s),type:"password",class:"w-full bg-gray-50 border-gray-100 rounded-2xl px-6 py-4 text-sm focus:ring-2 focus:ring-[#ff0033] outline-none transition-all",required:!u.value,placeholder:u.value?t(a).language==="ar"?"اتركه فارغاً لعدم التغيير":"Leave empty to keep current":""},null,8,He),[[y,t(r).password]])]),e("div",Re,[e("button",{type:"button",onClick:o[9]||(o[9]=s=>g.value=!1),class:"flex-1 bg-gray-100 text-gray-600 rounded-2xl py-4 font-bold text-sm hover:bg-gray-200 transition-all"},l(t(a).language==="ar"?"إلغاء":"Cancel"),1),e("button",{type:"submit",disabled:t(r).processing,class:"flex-1 bg-gradient-to-r from-[#ff0033] to-[#cc0029] text-white rounded-2xl py-4 font-bold text-sm shadow-xl shadow-red-500/20 hover:shadow-red-500/40 transition-all disabled:opacity-50"},l(u.value?t(a).language==="ar"?"حفظ التغييرات":"Save Changes":t(a).language==="ar"?"إضافة":"Create User"),9,Oe)])],32)])])],8,_e)):j("",!0)]),_:1})],64))}};export{Je as default};
