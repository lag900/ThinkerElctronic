import{u as w,c as r,a as t,b as s,h as F,w as m,d as l,o as d,e as P,i as p,F as k,r as N,t as _,g as U,q,k as C,j as A}from"./app-CwSgfrF7.js";import{_ as D}from"./AuthenticatedLayout-CXRLfXw4.js";import{D as E}from"./DangerButton-Zt3wBGCM.js";import{_ as c}from"./InputError-B14qaxmc.js";import{_ as f,a as y}from"./InputLabel-D1Xd08uI.js";import{P as $}from"./PrimaryButton-ekfNIuHi.js";import{_ as b}from"./SecondaryButton-J7GUzc5M.js";import"./CartStore-ZGfwtq5b.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"flex justify-between items-center"},j={class:"py-12"},M={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},I={class:"bg-white shadow sm:rounded-lg overflow-hidden"},T={class:"p-6 border-b border-gray-200"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},z={class:"flex gap-2"},G={class:"divide-y divide-gray-200"},H={class:"md:col-span-3 flex gap-2"},J={class:"flex-1"},K={class:"font-bold text-lg"},O={class:"text-gray-800"},Q=["href"],R={key:1,class:"block text-sm text-gray-400 italic"},X={class:"flex gap-2 shrink-0"},Y={key:0,class:"p-12 text-center text-gray-500"},re={__name:"Index",props:{packages:Array},setup(x){const g=C(!1),n=w({points:"",price:"",payment_link:""}),v=C(null),a=w({points:"",price:"",payment_link:""}),S=i=>{v.value=i.id,a.points=i.points,a.price=i.price,a.payment_link=i.payment_link||""},V=()=>{v.value=null,a.reset()},h=()=>{a.put(route("lms-packages.update",v.value),{preserveScroll:!0,onSuccess:()=>V()})},B=i=>{confirm(`Delete ${i.points} points - ${i.price}?`)&&A.delete(route("lms-packages.destroy",i.id),{preserveScroll:!0})};return(i,e)=>(d(),r(k,null,[t(s(F),{title:"LMS Point Packages"}),t(D,null,{header:m(()=>[l("div",L,[e[10]||(e[10]=l("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Batu LMS Point Packages ",-1)),t(s(q),{href:i.route("home"),class:"text-sm text-gray-500 hover:text-gray-700"},{default:m(()=>[...e[9]||(e[9]=[p(" ← View on Welcome page ",-1)])]),_:1},8,["href"])])]),default:m(()=>[l("div",j,[l("div",M,[l("div",I,[l("div",T,[g.value?(d(),r("form",{key:1,onSubmit:e[5]||(e[5]=P(o=>{s(n).post(i.route("lms-packages.store"),{onSuccess:()=>{s(n).reset(),g.value=!1}})},["prevent"])),class:"space-y-4"},[l("div",W,[l("div",null,[t(f,{for:"points",value:"Points"}),t(y,{id:"points",modelValue:s(n).points,"onUpdate:modelValue":e[1]||(e[1]=o=>s(n).points=o),type:"number",min:"1",class:"mt-1 block w-full",placeholder:"e.g. 100",required:""},null,8,["modelValue"]),t(c,{message:s(n).errors.points,class:"mt-1"},null,8,["message"])]),l("div",null,[t(f,{for:"price",value:"Price"}),t(y,{id:"price",modelValue:s(n).price,"onUpdate:modelValue":e[2]||(e[2]=o=>s(n).price=o),type:"text",class:"mt-1 block w-full",placeholder:"e.g. 50 جنيه",required:""},null,8,["modelValue"]),t(c,{message:s(n).errors.price,class:"mt-1"},null,8,["message"])]),l("div",null,[t(f,{for:"payment_link",value:"Payment Link"}),t(y,{id:"payment_link",modelValue:s(n).payment_link,"onUpdate:modelValue":e[3]||(e[3]=o=>s(n).payment_link=o),type:"url",class:"mt-1 block w-full",placeholder:"https://..."},null,8,["modelValue"]),t(c,{message:s(n).errors.payment_link,class:"mt-1"},null,8,["message"])])]),l("div",z,[t($,{type:"submit",disabled:s(n).processing},{default:m(()=>[...e[11]||(e[11]=[p(" Add Package ",-1)])]),_:1},8,["disabled"]),t(b,{type:"button",onClick:e[4]||(e[4]=o=>g.value=!1)},{default:m(()=>[...e[12]||(e[12]=[p(" Cancel ",-1)])]),_:1})])],32)):(d(),r("button",{key:0,onClick:e[0]||(e[0]=o=>g.value=!0),class:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-red-500 hover:text-red-600 font-medium transition-colors"}," + Add new point package "))]),l("div",G,[(d(!0),r(k,null,N(x.packages,o=>(d(),r("div",{key:o.id,class:"p-6 flex items-center justify-between gap-4"},[v.value===o.id?(d(),r("form",{key:0,onSubmit:P(h,["prevent"]),class:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4"},[l("div",null,[t(f,{value:"Points"}),t(y,{modelValue:s(a).points,"onUpdate:modelValue":e[6]||(e[6]=u=>s(a).points=u),type:"number",min:"1",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(c,{message:s(a).errors.points,class:"mt-1"},null,8,["message"])]),l("div",null,[t(f,{value:"Price"}),t(y,{modelValue:s(a).price,"onUpdate:modelValue":e[7]||(e[7]=u=>s(a).price=u),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(c,{message:s(a).errors.price,class:"mt-1"},null,8,["message"])]),l("div",null,[t(f,{value:"Payment Link"}),t(y,{modelValue:s(a).payment_link,"onUpdate:modelValue":e[8]||(e[8]=u=>s(a).payment_link=u),type:"url",class:"mt-1 block w-full"},null,8,["modelValue"]),t(c,{message:s(a).errors.payment_link,class:"mt-1"},null,8,["message"])]),l("div",H,[t($,{type:"submit",disabled:s(a).processing},{default:m(()=>[...e[13]||(e[13]=[p(" Save ",-1)])]),_:1},8,["disabled"]),t(b,{type:"button",onClick:V},{default:m(()=>[...e[14]||(e[14]=[p(" Cancel ",-1)])]),_:1})])],32)):(d(),r(k,{key:1},[l("div",J,[l("span",K,_(o.points)+" pts",1),e[15]||(e[15]=l("span",{class:"text-gray-600 mx-2"},"—",-1)),l("span",O,_(o.price),1),o.payment_link?(d(),r("a",{key:0,href:o.payment_link,target:"_blank",rel:"noopener",class:"block text-sm text-red-600 hover:underline mt-1 truncate max-w-md"},_(o.payment_link),9,Q)):(d(),r("span",R,"No link set"))]),l("div",X,[t(b,{onClick:u=>S(o)},{default:m(()=>[...e[16]||(e[16]=[p(" Edit ",-1)])]),_:1},8,["onClick"]),t(E,{onClick:u=>B(o)},{default:m(()=>[...e[17]||(e[17]=[p(" Delete ",-1)])]),_:1},8,["onClick"])])],64))]))),128)),x.packages.length===0?(d(),r("div",Y,' No packages yet. Click "Add new point package" above to create one. ')):U("",!0)])])])])]),_:1})],64))}};export{re as default};
