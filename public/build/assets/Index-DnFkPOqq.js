import{m,g as P,x as A,p as k,K as F,I as j,w as y,b as e,i as c,v as x,e as w,o as l,c as n,F as h,r as E,t as i,j as d,n as u,a as U,T as Z,k as B,u as o,J as T,s as _}from"./app-CP-pjwJw.js";import{_ as N}from"./AdminLayout-BOQgtYvf.js";import"./CartStore-DMP8QdRv.js";const G={class:"max-w-[1400px] mx-auto space-y-8"},$={class:"flex flex-col md:flex-row justify-between items-center gap-6"},H={class:"flex items-center gap-4 w-full md:w-auto"},q={class:"relative flex-1 md:w-64"},O={class:"bg-white rounded-[32px] p-2 shadow-sm border border-slate-100"},R={class:"overflow-x-auto custom-scrollbar"},I={class:"w-full text-left border-collapse"},J={class:"p-6"},K={class:"flex items-center gap-4"},Q={class:"w-10 h-10 rounded-xl flex items-center justify-center shrink-0 font-black text-brand-500 bg-brand-50"},X={class:"text-sm font-black text-[#222]"},W={key:0,class:"text-[10px] font-bold uppercase tracking-widest text-[#999] mt-0.5"},Y={class:"p-6 text-right font-black text-[#222]"},z={key:0,class:"text-brand-500"},ee={class:"p-6 text-right"},te={class:"text-[11px] font-bold text-slate-500 uppercase tracking-widest"},se={class:"p-6 text-center"},re={class:"px-3 py-1 bg-slate-100 text-slate-600 rounded-lg text-xs font-bold"},oe={class:"p-6 text-center"},le=["onClick"],ae={class:"p-6 text-right space-x-2"},ne=["onClick"],ie=["onClick"],de={key:0,class:"p-12 text-center"},ce={key:0,class:"flex justify-center gap-2 mt-8 pb-10"},ue=["innerHTML"],pe={key:0,class:"fixed inset-0 z-[200] flex items-center justify-center p-4"},be={class:"relative bg-white rounded-[32px] shadow-2xl w-full max-w-xl overflow-hidden p-8 border border-white"},xe={class:"text-2xl font-black text-[#222] tracking-tight mb-8"},fe={class:"grid grid-cols-2 gap-6"},ve={class:"col-span-2"},he={key:0,class:"text-xs text-brand-500 font-bold mt-1 block"},ge={key:0,class:"text-xs text-brand-500 font-bold mt-1 block"},me={key:0,class:"text-xs text-brand-500 font-bold mt-1 block"},ke={class:"col-span-2 p-6 rounded-2xl border border-slate-100 bg-slate-50/50 space-y-6"},ye={class:"flex items-center gap-3 cursor-pointer"},we={key:0,class:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},_e={key:0,class:"grid grid-cols-2 gap-6"},Ce={class:"col-span-2 mt-2"},Me={class:"flex items-center gap-3 cursor-pointer"},je={class:"flex items-center gap-4 pt-6"},Ee=["disabled"],Le={__name:"Index",props:{zones:Object,filters:Object},setup(p){const g=m(p.filters.search||""),b=m(!1),f=m(null),r=P({city:"",price:0,estimated_days:"",is_active:!0,is_free:!1,express_price:null,free_delivery_threshold:null});let C=null;A(g,a=>{clearTimeout(C),C=setTimeout(()=>{k.get(route("admin.delivery-zones.index"),{search:a},{preserveState:!0,replace:!0})},500)});const M=(a=null)=>{f.value=a,a?(r.city=a.city,r.price=a.price,r.estimated_days=a.estimated_days,r.is_active=a.is_active,r.is_free=a.is_free,r.express_price=a.express_price,r.free_delivery_threshold=a.free_delivery_threshold):r.reset(),b.value=!0},V=()=>{f.value?r.put(route("admin.delivery-zones.update",f.value.id),{onSuccess:()=>{b.value=!1,_.showNotification("Done","Zone updated successfully.")}}):r.post(route("admin.delivery-zones.store"),{onSuccess:()=>{b.value=!1,_.showNotification("Done","Zone added successfully.")}})},D=a=>{k.put(route("admin.delivery-zones.toggle",a.id),{},{preserveScroll:!0})},S=a=>{confirm("Are you certain you want to delete this zone?")&&k.delete(route("admin.delivery-zones.destroy",a.id),{onSuccess:()=>_.showNotification("Done","Zone removed.")})};return(a,t)=>{const L=F("Link");return l(),j(N,null,{header:y(()=>[...t[11]||(t[11]=[w("Delivery Pricing Control",-1)])]),default:y(()=>[e("div",G,[e("div",$,[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-3xl font-black text-[#222] tracking-tighter"},"Governorate Rules"),e("p",{class:"text-xs font-bold uppercase tracking-widest text-slate-400 mt-2"},"Manage ERP Shipping Algorithms")],-1)),e("div",H,[e("div",q,[c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),type:"text",placeholder:"Find governorate...",class:"w-full h-12 rounded-2xl border-none bg-white shadow-sm hover:shadow transition-shadow pl-12 pr-4 font-bold text-sm focus:ring-2 focus:ring-brand-500"},null,512),[[x,g.value]]),t[12]||(t[12]=e("svg",{class:"w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),e("button",{onClick:t[1]||(t[1]=s=>M()),class:"h-12 bg-brand-500 text-white px-6 rounded-2xl text-[11px] font-black uppercase tracking-widest shadow-lg shadow-brand-500/20 hover:scale-[1.02] transition-transform shrink-0 flex items-center gap-2"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),w(" Add Zone ",-1)])])])]),e("div",O,[e("div",R,[e("table",I,[t[17]||(t[17]=e("thead",null,[e("tr",{class:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400"},[e("th",{class:"p-6"},"Governorate"),e("th",{class:"p-6 text-right"},"Standard Price"),e("th",{class:"p-6 text-right"},"Express / Free"),e("th",{class:"p-6 text-center"},"Delivery Time"),e("th",{class:"p-6 text-center"},"Status"),e("th",{class:"p-6 text-right"},"Actions")])],-1)),e("tbody",null,[(l(!0),n(h,null,E(p.zones.data,s=>(l(),n("tr",{key:s.id,class:"border-t border-slate-50 hover:bg-slate-50/50 transition-colors group"},[e("td",J,[e("div",K,[e("div",Q,i(s.city.substring(0,2).toUpperCase()),1),e("div",null,[e("div",X,i(s.city),1),s.free_delivery_threshold?(l(),n("div",W," Free threshold: "+i(s.free_delivery_threshold)+" EGP ",1)):d("",!0)])])]),e("td",Y,[s.is_free?(l(),n("span",z,"FREE")):(l(),n(h,{key:1},[w(i(s.price)+" EGP ",1)],64))]),e("td",ee,[e("div",te,"EXP: "+i(s.express_price?`${s.express_price} EGP`:"N/A"),1)]),e("td",se,[e("span",re,i(s.estimated_days),1)]),e("td",oe,[e("button",{onClick:v=>D(s),class:u(["w-12 h-6 rounded-full relative transition-colors duration-300",s.is_active?"bg-brand-500":"bg-slate-200"])},[e("div",{class:u(["absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform duration-300",s.is_active?"translate-x-6":"translate-x-0"])},null,2)],10,le)]),e("td",ae,[e("button",{onClick:v=>M(s),class:"w-10 h-10 inline-flex items-center justify-center rounded-xl hover:bg-white border transform transition-all text-slate-400 hover:text-brand-500 hover:border-brand-500"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,ne),e("button",{onClick:v=>S(s),class:"w-10 h-10 inline-flex items-center justify-center rounded-xl hover:bg-white border transform transition-all text-slate-400 hover:text-red-500 hover:border-red-500"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ie)])]))),128))])]),p.zones.data.length===0?(l(),n("div",de,[...t[18]||(t[18]=[e("span",{class:"text-sm font-bold text-slate-400 block uppercase tracking-widest"},"No governorates found or added yet.",-1)])])):d("",!0)])]),p.zones.links&&p.zones.data.length>0?(l(),n("div",ce,[(l(!0),n(h,null,E(p.zones.links,(s,v)=>(l(),n(h,{key:v},[s.url?(l(),j(L,{key:0,href:s.url,innerHTML:s.label,class:u(["px-4 py-2 rounded-xl text-xs font-black transition-all",s.active?"bg-brand-500 text-white shadow-lg":"bg-white text-slate-400 hover:text-[#222] border"])},null,8,["href","innerHTML","class"])):(l(),n("span",{key:1,innerHTML:s.label,class:"px-4 py-2 text-xs font-black text-slate-400 opacity-50"},null,8,ue))],64))),128))])):d("",!0)]),U(Z,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:y(()=>[b.value?(l(),n("div",pe,[e("div",{onClick:t[2]||(t[2]=s=>b.value=!1),class:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),e("div",be,[e("h2",xe,i(f.value?"Edit Zone":"Create Pricing Zone"),1),e("form",{onSubmit:B(V,["prevent"]),class:"space-y-6"},[e("div",fe,[e("div",ve,[t[19]||(t[19]=e("label",{class:"block text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2"},"Governorate / City",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(r).city=s),type:"text",class:"w-full h-12 rounded-2xl bg-slate-50 border-transparent focus:bg-white focus:border-brand-500 focus:ring-2 focus:ring-brand-500 font-bold px-4 transition-all",required:""},null,512),[[x,o(r).city]]),o(r).errors.city?(l(),n("span",he,i(o(r).errors.city),1)):d("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2"},"Standard Delivery (EGP)",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(r).price=s),type:"number",step:"0.01",class:"w-full h-12 rounded-2xl bg-slate-50 border-transparent focus:bg-white focus:border-brand-500 focus:ring-2 focus:ring-brand-500 font-black px-4 transition-all",required:""},null,512),[[x,o(r).price]]),o(r).errors.price?(l(),n("span",ge,i(o(r).errors.price),1)):d("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2"},"Estimated Days",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(r).estimated_days=s),type:"text",placeholder:"e.g. 1-2 Days",class:"w-full h-12 rounded-2xl bg-slate-50 border-transparent focus:bg-white focus:border-brand-500 focus:ring-2 focus:ring-brand-500 font-bold px-4 transition-all",required:""},null,512),[[x,o(r).estimated_days]]),o(r).errors.estimated_days?(l(),n("span",me,i(o(r).errors.estimated_days),1)):d("",!0)]),e("div",ke,[t[26]||(t[26]=e("h4",{class:"text-[10px] font-black text-brand-500 uppercase tracking-widest border-b border-slate-200 pb-2"},"Advanced Config",-1)),e("div",null,[e("label",ye,[e("div",{class:u(["w-5 h-5 rounded flex items-center justify-center transition-colors",o(r).is_free?"bg-brand-500":"bg-slate-200"])},[o(r).is_free?(l(),n("svg",we,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},null,-1)])])):d("",!0)],2),c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>o(r).is_free=s),class:"hidden"},null,512),[[T,o(r).is_free]]),t[23]||(t[23]=e("span",{class:"text-xs font-bold uppercase tracking-widest"},"Always Free Delivery",-1))])]),o(r).is_free?d("",!0):(l(),n("div",_e,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2"},"Express Target (EGP) optional",-1)),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(r).express_price=s),type:"number",step:"0.01",class:"w-full h-12 rounded-xl bg-white border border-slate-100 focus:border-brand-500 focus:ring-2 focus:ring-brand-500 font-bold px-4 transition-all"},null,512),[[x,o(r).express_price]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2"},"Order Threshold for Free",-1)),c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(r).free_delivery_threshold=s),type:"number",step:"0.01",class:"w-full h-12 rounded-xl bg-white border border-slate-100 focus:border-brand-500 focus:ring-2 focus:ring-brand-500 font-bold px-4 transition-all",placeholder:"e.g. 1000"},null,512),[[x,o(r).free_delivery_threshold]])])]))]),e("div",Ce,[e("label",Me,[e("div",{class:u(["w-12 h-6 rounded-full relative transition-colors duration-300",o(r).is_active?"bg-emerald-500":"bg-slate-200"])},[e("div",{class:u(["absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform duration-300",o(r).is_active?"translate-x-6":"translate-x-0"])},null,2)],2),c(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o(r).is_active=s),class:"hidden"},null,512),[[T,o(r).is_active]]),e("span",{class:u(["text-xs font-black tracking-widest uppercase",o(r).is_active?"text-emerald-500":"text-slate-400"])},i(o(r).is_active?"Zone Verified Active":"Zone Deactivated"),3)])])]),e("div",je,[e("button",{type:"submit",disabled:o(r).processing,class:"flex-1 h-14 bg-[#222] hover:bg-brand-500 text-white rounded-2xl font-black uppercase tracking-widest text-xs transition-colors shadow-lg active:scale-[0.98] disabled:opacity-50"},i(o(r).processing?"Saving...":f.value?"Update Engine":"Deploy Pricing"),9,Ee),e("button",{type:"button",onClick:t[10]||(t[10]=s=>b.value=!1),class:"px-8 h-14 border border-slate-200 rounded-2xl font-black uppercase tracking-widest text-[#222] text-xs hover:bg-slate-50 transition-colors"}," Cancel ")])],32)])])):d("",!0)]),_:1})]),_:1})}}};export{Le as default};
