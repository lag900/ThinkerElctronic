import{g as k,c as l,a as f,u as e,h as v,w as b,b as t,n as g,t as s,o as i,F as u,r as h,d as w,k as S,i as d,l as F,v as p,j as I,e as q,m as C,s as V}from"./app-DEjua4KK.js";import{_ as B}from"./AdminLayout-CvzAG1i3.js";import{c as r}from"./CartStore-Dl_YxAFS.js";const A=["dir"],N={class:"flex flex-col md:flex-row justify-between items-center bg-white p-10 rounded-[24px] border border-gray-100 shadow-sm gap-8 transition-all hover:shadow-md"},O={class:"text-3xl font-black text-gray-900 tracking-tighter uppercase"},U={class:"text-[10px] font-black text-gray-400 mt-2 uppercase tracking-widest"},E={class:"bg-white rounded-[28px] border border-gray-100 shadow-sm overflow-hidden"},j={class:"bg-gray-50/50 border-b border-gray-100"},L={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},M={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},T={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},X={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},z={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},D={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},P={class:"px-8 py-6 text-[10px] font-black uppercase text-gray-400 tracking-widest"},R={class:"divide-y divide-gray-50"},$={class:"px-8 py-6"},G={class:"font-black text-gray-900 text-sm"},Q={class:"text-[9px] text-gray-400 font-bold uppercase tracking-widest mt-1"},H={class:"px-8 py-6 font-black text-gray-600 text-sm"},J={class:"px-8 py-6"},K={class:"flex items-center gap-3"},W={class:"w-16 h-1.5 bg-gray-100 rounded-full overflow-hidden"},Y={class:"px-8 py-6 font-black text-gray-900 text-sm"},Z={class:"px-8 py-6 font-black text-gray-900 text-sm"},tt={class:"px-8 py-6"},et={class:"text-[10px] font-black text-gray-500 uppercase"},at={class:"text-[9px] text-gray-400 font-bold mt-1 uppercase"},st={class:"px-8 py-6 text-[10px] font-black text-gray-400 uppercase tracking-tighter"},rt={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-gray-900/60 backdrop-blur-md"},ot={class:"bg-white w-full max-w-2xl rounded-[32px] shadow-2xl border border-gray-100 animate-in zoom-in-95 duration-300"},nt={class:"px-10 py-8 border-b border-gray-100 flex items-center justify-between"},lt={class:"text-2xl font-black text-gray-900 tracking-tighter uppercase"},it={class:"space-y-6"},ct={class:"space-y-2"},dt={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest px-1"},pt={value:"",disabled:""},gt=["value"],ut={class:"grid grid-cols-2 gap-6"},xt={class:"space-y-2"},yt={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest px-1"},_t={class:"space-y-2"},ft={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest px-1"},bt={class:"grid grid-cols-2 gap-6"},ht={class:"space-y-2"},mt={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest px-1"},kt=["placeholder"],vt={class:"space-y-2"},wt={class:"text-[10px] font-black uppercase text-gray-400 tracking-widest px-1"},St={class:"pt-6 border-t border-gray-50 flex gap-4"},Ft=["disabled"],Vt={__name:"Index",props:{products:Array,batches:Object},setup(x){const c=C(!1),n=k({product_id:"",quantity:"",cost_price:"",supplier:"",invoice_number:""}),m=()=>{n.post(route("admin.purchases.store"),{onSuccess:()=>{c.value=!1,n.reset(),V.notify(r.language==="ar"?"تم تسجيل توريد بضاعة جديد بنجاح":"Inventory batch successful")}})},y=_=>new Intl.NumberFormat(r.language==="ar"?"ar-EG":"en-US",{style:"currency",currency:"EGP"}).format(_);return(_,o)=>(i(),l(u,null,[f(e(v),{title:e(r).language==="ar"?"التوريدات والمخزون FIFO":"Purchases & FIFO Batches"},null,8,["title"]),f(B,null,{header:b(()=>[q(s(e(r).language==="ar"?"إدارة التوريدات وحسابات التكلفة FIFO":"Inventory Strategic Sourcing & FIFO Control"),1)]),default:b(()=>[t("div",{class:"space-y-10 font-inter",dir:e(r).language==="ar"?"rtl":"ltr"},[t("div",N,[t("div",{class:g(e(r).language==="ar"?"text-right":"text-left")},[t("h3",O,s(e(r).language==="ar"?"سجل توريدات المخزون":"Stock Batch Repository"),1),t("p",U,s(e(r).language==="ar"?"نظام المحاسبة المتقدم: الوارد أولاً يصرف أولاً (FIFO)":"Enterprise-Grade FIFO Accounting Protocol Active"),1)],2),t("button",{onClick:o[0]||(o[0]=a=>c.value=!0),class:"bg-gray-900 text-white px-12 py-5 rounded-[16px] font-black text-xs uppercase tracking-[0.2em] shadow-2xl shadow-gray-900/10 hover:bg-gray-800 transition-all active:scale-95"}," + "+s(e(r).language==="ar"?"تسجيل توريد بضاعة":"Induct Stock Entry"),1)]),t("div",E,[t("table",{class:g(["w-full text-left",e(r).language==="ar"?"text-right":"text-left"])},[t("thead",null,[t("tr",j,[t("th",L,s(e(r).language==="ar"?"المنتج":"Strategic Asset"),1),t("th",M,s(e(r).language==="ar"?"الكمية الأصلية":"Initial Qty"),1),t("th",T,s(e(r).language==="ar"?"المتبقي":"Available"),1),t("th",X,s(e(r).language==="ar"?"تكلفة الوحدة":"Unit Cost"),1),t("th",z,s(e(r).language==="ar"?"التكلفة الإجمالية":"Total Valuation"),1),t("th",D,s(e(r).language==="ar"?"المورد / الفاتورة":"Supplier / Ref"),1),t("th",P,s(e(r).language==="ar"?"التاريخ":"Time Stamp"),1)])]),t("tbody",R,[(i(!0),l(u,null,h(x.batches.data,a=>(i(),l("tr",{key:a.id,class:"hover:bg-gray-50/80 transition-colors group"},[t("td",$,[t("div",G,s(a.product.name),1),t("div",Q,"ID: #"+s(a.product_id)+" Batch #"+s(a.id),1)]),t("td",H,s(a.quantity),1),t("td",J,[t("div",K,[t("span",{class:g(["font-black text-sm",a.remaining_quantity===0?"text-red-400":"text-emerald-600"])},s(a.remaining_quantity),3),t("div",W,[t("div",{class:"h-full bg-emerald-500 transition-all duration-1000",style:w({width:a.remaining_quantity/a.quantity*100+"%"})},null,4)])])]),t("td",Y,s(y(a.cost_price)),1),t("td",Z,s(y(a.total_cost)),1),t("td",tt,[t("span",et,s(a.supplier||"N/A"),1),t("div",at,s(a.invoice_number||"Internal Reference"),1)]),t("td",st,s(new Date(a.created_at).toLocaleString()),1)]))),128))])],2)]),c.value?(i(),l("div",rt,[t("div",ot,[t("div",nt,[t("h3",lt,s(e(r).language==="ar"?"حقن مخزون جديد (FIFO)":"New Batch Induction"),1),t("button",{onClick:o[1]||(o[1]=a=>c.value=!1),class:"text-gray-400 hover:text-gray-900 transition-colors"},[...o[8]||(o[8]=[t("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:S(m,["prevent"]),class:"p-10 space-y-8"},[t("div",it,[t("div",ct,[t("label",dt,s(e(r).language==="ar"?"اختر المنتج":"Target Asset"),1),d(t("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>e(n).product_id=a),class:"w-full bg-gray-50 border-none rounded-[16px] px-6 py-4 text-sm font-black text-gray-900 focus:ring-2 focus:ring-gray-900 shadow-inner appearance-none",required:""},[t("option",pt,s(e(r).language==="ar"?"اختر منتجاً...":"Select Strategic Product..."),1),(i(!0),l(u,null,h(x.products,a=>(i(),l("option",{key:a.id,value:a.id},s(a.name)+" (Stock: "+s(a.stock_quantity)+")",9,gt))),128))],512),[[F,e(n).product_id]])]),t("div",ut,[t("div",xt,[t("label",yt,s(e(r).language==="ar"?"الكمية الواردة":"Quantity In"),1),d(t("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>e(n).quantity=a),type:"number",step:"1",min:"1",class:"w-full bg-gray-50 border-none rounded-[16px] px-6 py-4 text-sm font-black text-gray-900 focus:ring-2 focus:ring-gray-900 shadow-inner",placeholder:"0",required:""},null,512),[[p,e(n).quantity]])]),t("div",_t,[t("label",ft,s(e(r).language==="ar"?"تكلفة الوحدة":"Landed Unit Cost"),1),d(t("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>e(n).cost_price=a),type:"number",step:"0.01",min:"0",class:"w-full bg-gray-50 border-none rounded-[16px] px-6 py-4 text-sm font-black text-gray-900 focus:ring-2 focus:ring-gray-900 shadow-inner",placeholder:"0.00",required:""},null,512),[[p,e(n).cost_price]])])]),t("div",bt,[t("div",ht,[t("label",mt,s(e(r).language==="ar"?"المورد":"Strategic Supplier"),1),d(t("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>e(n).supplier=a),type:"text",class:"w-full bg-gray-50 border-none rounded-[16px] px-6 py-4 text-sm font-black text-gray-900 focus:ring-2 focus:ring-gray-900 shadow-inner",placeholder:e(r).language==="ar"?"اسم المورد...":"Source Logistics Entity..."},null,8,kt),[[p,e(n).supplier]])]),t("div",vt,[t("label",wt,s(e(r).language==="ar"?"رقم الفاتورة":"Ref Invoice #"),1),d(t("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>e(n).invoice_number=a),type:"text",class:"w-full bg-gray-50 border-none rounded-[16px] px-6 py-4 text-sm font-black text-gray-900 focus:ring-2 focus:ring-gray-900 shadow-inner",placeholder:"INV-XXXXX"},null,512),[[p,e(n).invoice_number]])])])]),t("div",St,[t("button",{type:"button",onClick:o[7]||(o[7]=a=>c.value=!1),class:"flex-1 px-8 py-4 font-black text-[10px] uppercase tracking-widest text-gray-400 hover:text-gray-900 transition-all"},s(e(r).language==="ar"?"إلغاء":"Abort"),1),t("button",{type:"submit",disabled:e(n).processing,class:"flex-[2] bg-gray-900 text-white py-4 rounded-[16px] font-black text-[10px] uppercase tracking-[0.3em] transition-all shadow-2xl shadow-gray-900/40 hover:bg-emerald-600 hover:scale-[1.02] disabled:opacity-50 active:scale-95"},s(e(r).language==="ar"?"تثبيت التوريد":"Commit Batch"),9,Ft)])],32)])])):I("",!0)],8,A)]),_:1})],64))}};export{Vt as default};
