import{c as l,a as h,b as o,h as B,w as b,T as H,o as i,n as d,d as e,i as k,t as n,g as I,F as p,r as v,j as f,k as w,m as y}from"./app-CwSgfrF7.js";import{_ as N}from"./AdminLayout-ByBs5Sq6.js";import{c as s}from"./CartStore-ZGfwtq5b.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"space-y-8"},E={class:"flex gap-8 border-b border-slate-200 pb-px"},F={class:"bg-white rounded-[40px] border border-slate-100 shadow-sm overflow-hidden"},S={class:"overflow-x-auto"},D=["dir"],G={class:"bg-slate-50/50 text-[10px] font-black uppercase tracking-widest text-slate-400"},L={class:"px-8 py-6"},P={class:"px-8 py-6"},A={class:"px-8 py-6"},O={class:"px-8 py-6"},U={class:"px-8 py-6"},R={class:"px-8 py-6"},q={class:"divide-y divide-slate-50"},J={class:"px-8 py-6"},K={class:"text-xs font-black text-indigo-600 bg-indigo-50/50 px-2 py-1 rounded-md"},Q={class:"px-8 py-6"},W={class:"text-sm font-black text-slate-900"},X={class:"text-[10px] text-slate-400 font-bold uppercase tracking-tight"},Y={class:"px-8 py-6"},Z={class:"text-[11px] font-bold text-slate-400"},ee={class:"px-8 py-6"},te={class:"text-sm font-black text-slate-900"},se={class:"px-8 py-6"},oe={class:"px-8 py-6"},ae={key:0,class:"text-[10px] font-black text-slate-500 bg-slate-100 px-2 py-1 rounded-md"},ne={key:1,class:"text-[10px] font-bold text-slate-300 italic"},re=["onClick","disabled"],le={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ie={key:1,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},de={class:"text-[10px] font-black uppercase hidden group-hover:inline"},ce=["onClick"],ue=["onClick"],pe=["onClick"],xe=["onClick"],ge={class:"flex justify-center pt-6"},he={class:"flex gap-2"},be=["onClick","innerHTML","disabled"],ve={__name:"Orders",props:{orders:Object},setup(m){const x=w(null),c=w(null),g=(r,a="success")=>{c.value={message:r,type:a},setTimeout(()=>{c.value=null},3e3)},C=r=>{switch(r){case"processing":return"text-indigo-600 bg-indigo-50 border-indigo-100";case"shipped":return"text-blue-600 bg-blue-50 border-blue-100";case"delivered":return"text-emerald-600 bg-emerald-50 border-emerald-100";case"pending":return"text-amber-600 bg-amber-50 border-amber-100";default:return"text-slate-500 bg-slate-50 border-slate-100"}},j=r=>new Intl.NumberFormat(s.language==="ar"?"ar-EG":"en-US",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(r),_=async r=>{x.value=r;try{(await y.post(`/admin/orders/${r}/invoice`)).data.success&&(g(s.language==="ar"?"تم إنشاء الفاتورة بنجاح":"Invoice generated successfully"),f.reload({only:["orders"]}))}catch(a){console.error(a),g(s.language==="ar"?"حدث خطأ أثناء إنشاء الفاتورة":"Error generating invoice","error")}finally{x.value=null}},$=r=>{window.open(`/admin/invoices/download/${r}`,"_blank")},M=async r=>{try{(await y.post(`/admin/invoices/${r}/send-email`)).data.success&&g(s.language==="ar"?"تم إرسال الفاتورة للبريد الإلكتروني":"Invoice sent to email")}catch(a){console.error(a),g(s.language==="ar"?"فشل إرسال البريد الإلكتروني":"Failed to send email","error")}},V=r=>{window.open(`/admin/orders/${r}/invoice/preview`,"_blank")};return(r,a)=>(i(),l(p,null,[h(o(B),{title:o(s).t("orders")},null,8,["title"]),h(N,null,{header:b(()=>[k(n(o(s).t("orders")),1)]),default:b(()=>[h(H,{name:"fade"},{default:b(()=>[c.value?(i(),l("div",{key:0,class:d(["fixed top-6 right-6 z-50 px-6 py-4 rounded-2xl shadow-2xl border text-sm font-black flex items-center gap-3 backdrop-blur-xl",c.value.type==="error"?"bg-red-50/90 border-red-100 text-red-600":"bg-emerald-50/90 border-emerald-100 text-emerald-600"])},[e("div",{class:d(["w-2 h-2 rounded-full animate-pulse",c.value.type==="error"?"bg-red-500":"bg-emerald-500"])},null,2),k(" "+n(c.value.message),1)],2)):I("",!0)]),_:1}),e("div",z,[e("div",E,[(i(!0),l(p,null,v(o(s).language==="ar"?["الكل","قيد الانتظار","قيد التنفيذ","فاشل"]:["All Transmissions","Pending","Processing","Failed"],t=>(i(),l("button",{key:t,class:d(["text-[10px] font-black uppercase tracking-widest pb-4 border-b-2 transition-all",t===(o(s).language==="ar"?"الكل":"All Transmissions")?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"])},n(t),3))),128))]),e("div",F,[e("div",S,[e("table",{class:d(["w-full text-left",{"text-right":o(s).language==="ar"}]),dir:o(s).language==="ar"?"rtl":"ltr"},[e("thead",null,[e("tr",G,[e("th",L,n(o(s).t("orderId")),1),e("th",P,n(o(s).language==="ar"?"العميل":"Customer Subject"),1),e("th",A,n(o(s).t("date")),1),e("th",O,n(o(s).language==="ar"?"القيمة":"Value"),1),e("th",U,n(o(s).t("status")),1),e("th",R,n(o(s).language==="ar"?"رقم الفاتورة":"Invoice No."),1),e("th",{class:d(["px-8 py-6",o(s).language==="ar"?"text-left":"text-right"])},n(o(s).t("action")),3)])]),e("tbody",q,[(i(!0),l(p,null,v(m.orders.data,t=>(i(),l("tr",{key:t.id,class:"hover:bg-slate-50/30 transition-colors group"},[e("td",J,[e("span",K,"#"+n(t.order_number),1)]),e("td",Q,[e("p",W,n(t.customer?.name),1),e("p",X,n(t.customer?.email),1)]),e("td",Y,[e("span",Z,n(new Date(t.created_at).toLocaleDateString(o(s).language==="ar"?"ar-EG":"en-US")),1)]),e("td",ee,[e("span",te,n(j(t.total)),1)]),e("td",se,[e("span",{class:d(["inline-flex px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border",C(t.status)])},n(t.status),3)]),e("td",oe,[t.invoice?(i(),l("span",ae,n(t.invoice.invoice_number),1)):(i(),l("span",ne,n(o(s).language==="ar"?"لم يتم إنشاؤها":"Not Generated"),1))]),e("td",{class:d(["px-8 py-6",o(s).language==="ar"?"text-left":"text-right"])},[e("div",{class:d(["flex items-center gap-2",o(s).language==="ar"?"justify-start":"justify-end"])},[t.invoice?(i(),l(p,{key:1},[e("button",{onClick:u=>$(t.invoice.secure_token),class:"p-2 hover:bg-slate-50 rounded-xl text-slate-300 hover:text-indigo-600 transition-all group",title:"Download"},[...a[2]||(a[2]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,ce),e("button",{onClick:u=>V(t.id),class:"p-2 hover:bg-slate-50 rounded-xl text-slate-300 hover:text-emerald-600 transition-all",title:"Preview"},[...a[3]||(a[3]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,ue),e("button",{onClick:u=>M(t.invoice.id),class:"p-2 hover:bg-slate-50 rounded-xl text-slate-300 hover:text-amber-600 transition-all",title:"Send to Email"},[...a[4]||(a[4]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)])],8,pe),e("button",{onClick:u=>_(t.id),class:"p-2 hover:bg-red-50 rounded-xl text-slate-300 hover:text-red-600 transition-all font-black text-[10px]",title:"Regenerate"},[...a[5]||(a[5]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,xe)],64)):(i(),l("button",{key:0,onClick:u=>_(t.id),disabled:x.value===t.id,class:"p-2 hover:bg-red-50 rounded-xl text-slate-300 hover:text-red-600 transition-all flex items-center gap-2 group",title:"Generate Invoice"},[x.value===t.id?(i(),l("svg",le,[...a[0]||(a[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(i(),l("svg",ie,[...a[1]||(a[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),e("span",de,n(o(s).language==="ar"?"إنشاء":"Generate"),1)],8,re))],2)],2)]))),128))])],10,D)])]),e("div",ge,[e("div",he,[(i(!0),l(p,null,v(m.orders.links,t=>(i(),l("button",{key:t.label,onClick:u=>o(f).visit(t.url),innerHTML:t.label,disabled:!t.url||t.active,class:d(["px-4 py-2 rounded-xl text-xs font-black transition-all",t.active?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white border border-slate-100 text-slate-400 hover:bg-slate-50"])},null,10,be))),128))])])])]),_:1})],64))}},we=T(ve,[["__scopeId","data-v-9154145e"]]);export{we as default};
