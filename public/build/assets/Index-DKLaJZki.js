import{u as w,g as r,a as t,b as s,h as F,w as m,d as l,o as d,e as P,f as p,F as k,q as N,t as b,i as U,l as q,p as C,s as A}from"./app-maRL_ENw.js";import{_ as D}from"./AuthenticatedLayout-BWKYM5Wr.js";import{_,D as E}from"./SecondaryButton-BFfXh7K_.js";import{_ as c,a as f,b as y}from"./TextInput-hs7wiOpq.js";import{P as $}from"./PrimaryButton-vajWareQ.js";import"./ApplicationLogo-CFxskqmv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"flex justify-between items-center"},M={class:"py-12"},j={class:"mx-auto max-w-4xl sm:px-6 lg:px-8"},I={class:"bg-white shadow sm:rounded-lg overflow-hidden"},T={class:"p-6 border-b border-gray-200"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},z={class:"flex gap-2"},G={class:"divide-y divide-gray-200"},H={class:"md:col-span-3 flex gap-2"},J={class:"flex-1"},K={class:"font-bold text-lg"},O={class:"text-gray-800"},Q=["href"],R={key:1,class:"block text-sm text-gray-400 italic"},X={class:"flex gap-2 shrink-0"},Y={key:0,class:"p-12 text-center text-gray-500"},ne={__name:"Index",props:{packages:Array},setup(x){const g=C(!1),n=w({points:"",price:"",payment_link:""}),v=C(null),o=w({points:"",price:"",payment_link:""}),S=i=>{v.value=i.id,o.points=i.points,o.price=i.price,o.payment_link=i.payment_link||""},V=()=>{v.value=null,o.reset()},h=()=>{o.put(route("lms-packages.update",v.value),{preserveScroll:!0,onSuccess:()=>V()})},B=i=>{confirm(`Delete ${i.points} points - ${i.price}?`)&&A.delete(route("lms-packages.destroy",i.id),{preserveScroll:!0})};return(i,e)=>(d(),r(k,null,[t(s(F),{title:"LMS Point Packages"}),t(D,null,{header:m(()=>[l("div",L,[e[10]||(e[10]=l("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Batu LMS Point Packages ",-1)),t(s(q),{href:i.route("home"),class:"text-sm text-gray-500 hover:text-gray-700"},{default:m(()=>[...e[9]||(e[9]=[p(" ← View on Welcome page ",-1)])]),_:1},8,["href"])])]),default:m(()=>[l("div",M,[l("div",j,[l("div",I,[l("div",T,[g.value?(d(),r("form",{key:1,onSubmit:e[5]||(e[5]=P(a=>{s(n).post(i.route("lms-packages.store"),{onSuccess:()=>{s(n).reset(),g.value=!1}})},["prevent"])),class:"space-y-4"},[l("div",W,[l("div",null,[t(c,{for:"points",value:"Points"}),t(f,{id:"points",modelValue:s(n).points,"onUpdate:modelValue":e[1]||(e[1]=a=>s(n).points=a),type:"number",min:"1",class:"mt-1 block w-full",placeholder:"e.g. 100",required:""},null,8,["modelValue"]),t(y,{message:s(n).errors.points,class:"mt-1"},null,8,["message"])]),l("div",null,[t(c,{for:"price",value:"Price"}),t(f,{id:"price",modelValue:s(n).price,"onUpdate:modelValue":e[2]||(e[2]=a=>s(n).price=a),type:"text",class:"mt-1 block w-full",placeholder:"e.g. 50 جنيه",required:""},null,8,["modelValue"]),t(y,{message:s(n).errors.price,class:"mt-1"},null,8,["message"])]),l("div",null,[t(c,{for:"payment_link",value:"Payment Link"}),t(f,{id:"payment_link",modelValue:s(n).payment_link,"onUpdate:modelValue":e[3]||(e[3]=a=>s(n).payment_link=a),type:"url",class:"mt-1 block w-full",placeholder:"https://..."},null,8,["modelValue"]),t(y,{message:s(n).errors.payment_link,class:"mt-1"},null,8,["message"])])]),l("div",z,[t($,{type:"submit",disabled:s(n).processing},{default:m(()=>[...e[11]||(e[11]=[p(" Add Package ",-1)])]),_:1},8,["disabled"]),t(_,{type:"button",onClick:e[4]||(e[4]=a=>g.value=!1)},{default:m(()=>[...e[12]||(e[12]=[p(" Cancel ",-1)])]),_:1})])],32)):(d(),r("button",{key:0,onClick:e[0]||(e[0]=a=>g.value=!0),class:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-red-500 hover:text-red-600 font-medium transition-colors"}," + Add new point package "))]),l("div",G,[(d(!0),r(k,null,N(x.packages,a=>(d(),r("div",{key:a.id,class:"p-6 flex items-center justify-between gap-4"},[v.value===a.id?(d(),r("form",{key:0,onSubmit:P(h,["prevent"]),class:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4"},[l("div",null,[t(c,{value:"Points"}),t(f,{modelValue:s(o).points,"onUpdate:modelValue":e[6]||(e[6]=u=>s(o).points=u),type:"number",min:"1",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(y,{message:s(o).errors.points,class:"mt-1"},null,8,["message"])]),l("div",null,[t(c,{value:"Price"}),t(f,{modelValue:s(o).price,"onUpdate:modelValue":e[7]||(e[7]=u=>s(o).price=u),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(y,{message:s(o).errors.price,class:"mt-1"},null,8,["message"])]),l("div",null,[t(c,{value:"Payment Link"}),t(f,{modelValue:s(o).payment_link,"onUpdate:modelValue":e[8]||(e[8]=u=>s(o).payment_link=u),type:"url",class:"mt-1 block w-full"},null,8,["modelValue"]),t(y,{message:s(o).errors.payment_link,class:"mt-1"},null,8,["message"])]),l("div",H,[t($,{type:"submit",disabled:s(o).processing},{default:m(()=>[...e[13]||(e[13]=[p(" Save ",-1)])]),_:1},8,["disabled"]),t(_,{type:"button",onClick:V},{default:m(()=>[...e[14]||(e[14]=[p(" Cancel ",-1)])]),_:1})])],32)):(d(),r(k,{key:1},[l("div",J,[l("span",K,b(a.points)+" pts",1),e[15]||(e[15]=l("span",{class:"text-gray-600 mx-2"},"—",-1)),l("span",O,b(a.price),1),a.payment_link?(d(),r("a",{key:0,href:a.payment_link,target:"_blank",rel:"noopener",class:"block text-sm text-red-600 hover:underline mt-1 truncate max-w-md"},b(a.payment_link),9,Q)):(d(),r("span",R,"No link set"))]),l("div",X,[t(_,{onClick:u=>S(a)},{default:m(()=>[...e[16]||(e[16]=[p(" Edit ",-1)])]),_:1},8,["onClick"]),t(E,{onClick:u=>B(a)},{default:m(()=>[...e[17]||(e[17]=[p(" Delete ",-1)])]),_:1},8,["onClick"])])],64))]))),128)),x.packages.length===0?(d(),r("div",Y,' No packages yet. Click "Add new point package" above to create one. ')):U("",!0)])])])])]),_:1})],64))}};export{ne as default};
